<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>ASIC Кликер с Магазином</title>
  <style>
    body {
      margin:0; padding:0;
      background: linear-gradient(135deg, #ffe5b4, #ffcba4);
      height:100vh; display:flex; flex-direction:column;
      align-items:center; justify-content:flex-start;
      font-family:'Segoe UI', sans-serif;
      color:#0f0f0f; user-select:none;
    }
    #top {
      width:100%; padding:20px;
      display:flex; justify-content:center; align-items:center;
    }
    #score { font-size:36px; margin-right:40px; }
    #income { font-size:20px; color:#555; }

    .shop {
      display:flex; gap:20px;
      margin:20px 0;
      overflow-x:auto; padding-bottom:10px;
    }
    .shop-item {
      width:200px; padding:15px;
      background:linear-gradient(to bottom, #fff, #ffe8d4);
      border:2px solid #ccc; border-radius:8px;
      flex-shrink:0;
      display:flex; flex-direction:column;
      align-items:center;
    }
    .shop-item button {
      margin-top:10px; padding:8px 12px;
      border:none; border-radius:6px;
      background:#ffab91; cursor:pointer;
    }
    .shop-item button:disabled {
      background:#ddd; cursor:not-allowed;
    }
    #asic-container {
      position:relative;
      width:600px; height:300px;
      background: linear-gradient(to right, #3c3c3c, #1f1f1f);
      border:6px solid #444; border-radius:10px;
      box-shadow: 0 0 30px rgba(0,0,0,0.4);
      display:flex; justify-content:space-between;
      align-items:center; padding:30px;
      cursor:pointer; transition:transform .1s ease;
      margin-bottom:20px;
    }
    #asic-container:active { transform:scale(1.02); }

    .fan {
      width:120px; height:120px;
      border-radius:50%;
      background:radial-gradient(#666,#222);
      position:relative;
      box-shadow:inset 0 0 10px #000;
      animation: spin 2s linear infinite;
    }
    .fan-blades {
      position:absolute; width:100%; height:100%;
      top:0; left:0; transform-origin:center;
      animation: spin-blades .8s linear infinite;
    }
    .blade {
      position:absolute; width:8px; height:60px;
      background:#00bfa5; left:50%; top:10px;
      transform-origin:bottom center; border-radius:4px;
      opacity:0.7; box-shadow:0 0 6px #00bfa5;
    }
    .blade:nth-child(1){transform:rotate(0deg) translateX(-50%);}
    .blade:nth-child(2){transform:rotate(60deg) translateX(-50%);}
    .blade:nth-child(3){transform:rotate(120deg) translateX(-50%);}
    .blade:nth-child(4){transform:rotate(180deg) translateX(-50%);}
    .blade:nth-child(5){transform:rotate(240deg) translateX(-50%);}
    .blade:nth-child(6){transform:rotate(300deg) translateX(-50%);}

    @keyframes spin-blades {0%{transform:rotate(0);}100%{transform:rotate(360deg);}}
    @keyframes spin {0%{}100%{}}

    .label {
      position:absolute; top:10px; left:20px;
      font-size:20px; font-weight:bold;
      color:#00bfa5; text-shadow:0 0 10px #000;
    }
  </style>
</head>
<body>

  <div id="top">
    <div id="score">Очки: 0</div>
    <div id="income">Доход/сек: 0</div>
  </div>

  <div id="asic-container" title="Кликни на ASIC">
    <div class="fan"><div class="fan-blades"><div class="blade"></div><div class="blade"></div><div class="blade"></div><div class="blade"></div><div class="blade"></div><div class="blade"></div></div></div>
    <div class="fan"><div class="fan-blades"><div class="blade"></div><div class="blade"></div><div class="blade"></div><div class="blade"></div><div class="blade"></div><div class="blade"></div></div></div>
    <div class="label" id="asic-label">ASIC X1</div>
  </div>

  <div class="shop" id="shop"></div>

  <script>
    const shopItems = [
      { id:'X1', name:'ASIC X1', cost:50, income:1 },
      { id:'S9', name:'Antminer S9', cost:200, income:5 },
      { id:'S19', name:'Antminer S19', cost:1000, income:30 },
      { id:'M30', name:'WhatsMiner M30', cost:5000, income:150 }
    ];

    let state = {
      score:0,
      owned:{ X1:1, S9:0, S19:0, M30:0 }
    };

    const saveKey = 'asicClickerState';

    function save() { localStorage.setItem(saveKey, JSON.stringify(state)); }
    function load() {
      const data = localStorage.getItem(saveKey);
      if(data) state = JSON.parse(data);
    }

    load();

    const scoreEl = document.getElementById('score');
    const incomeEl = document.getElementById('income');
    const shopEl = document.getElementById('shop');
    const asicContainer = document.getElementById('asic-container');
    const asicLabel = document.getElementById('asic-label');

    function calcIncome() {
      return shopItems.reduce((sum,item) => sum + (state.owned[item.id]||0)*item.income, 0);
    }

    function updateUI() {
      scoreEl.textContent = `Очки: ${Math.floor(state.score)}`;
      incomeEl.textContent = `Доход/сек: ${calcIncome()}`;
      asicLabel.textContent = shopItems[0].name;
      shopEl.innerHTML = '';
      shopItems.forEach(item => {
        const cnt = state.owned[item.id]||0;
        const b = document.createElement('button');
        b.textContent = `${item.name} (${cnt}) — купить за ${item.cost}`;
        b.disabled = state.score < item.cost;
        b.onclick = () => {
          if(state.score>=item.cost) {
            state.score -= item.cost;
            state.owned[item.id] = cnt+1;
            save(); updateUI();
          }
        }
        const div = document.createElement('div');
        div.className = 'shop-item';
        div.appendChild(b);
        shopEl.appendChild(div);
      });
    }

    asicContainer.onclick = () => {
      state.score++;
      save(); updateUI();
    };

    setInterval(() => {
      const inc = calcIncome();
      state.score += inc;
      save(); updateUI();
    }, 1000);

    updateUI();
  </script>

</body>
</html>