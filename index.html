<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>–ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã üé°</title>
<style>
  body {
    background: linear-gradient(135deg, #6b42f4, #b07cff);
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    height: 100vh;
    margin: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: white;
    user-select: none;
  }
  h1 {
    margin-bottom: 20px;
    text-shadow: 0 0 10px rgba(0,0,0,0.6);
  }
  #wheel-container {
    position: relative;
    width: 360px;
    height: 360px;
  }
  #wheel {
    width: 360px;
    height: 360px;
    border-radius: 50%;
    border: 8px solid #fff;
    box-shadow: 0 0 30px rgba(255,255,255,0.6);
    transition: transform 4s cubic-bezier(0.33, 1, 0.68, 1);
  }
  /* –°—Ç—Ä–µ–ª–∫–∞ —Å–≤–µ—Ä—Ö—É */
  #pointer {
    position: absolute;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    width: 0; 
    height: 0; 
    border-left: 20px solid transparent;
    border-right: 20px solid transparent;
    border-bottom: 30px solid #fff;
    filter: drop-shadow(0 0 4px rgba(0,0,0,0.3));
  }
  button {
    margin-top: 30px;
    background: #fff;
    color: #6b42f4;
    font-weight: 700;
    font-size: 20px;
    border: none;
    padding: 15px 30px;
    border-radius: 12px;
    cursor: pointer;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    transition: background 0.3s ease;
  }
  button:hover:not(:disabled) {
    background: #dcd6ff;
  }
  button:disabled {
    background: #bbb;
    cursor: not-allowed;
  }
  #result {
    margin-top: 25px;
    font-size: 22px;
    font-weight: 700;
    text-shadow: 0 0 8px rgba(0,0,0,0.4);
  }
</style>
</head>
<body>

<h1>–ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã üé°</h1>

<div id="wheel-container">
  <canvas id="wheel" width="360" height="360"></canvas>
  <div id="pointer"></div>
</div>

<button id="spinBtn">–ö—Ä—É—Ç–∏—Ç—å!</button>
<div id="result"></div>

<script>
  const canvas = document.getElementById('wheel');
  const ctx = canvas.getContext('2d');
  const spinBtn = document.getElementById('spinBtn');
  const resultDiv = document.getElementById('result');

  // –ü—Ä–∏–∑—ã –∏ –∏—Ö —Ü–≤–µ—Ç–∞
  const prizes = [
    {text: "100 üí∞", color: "#ff7f50"},
    {text: "200 üí∞", color: "#f5a623"},
    {text: "300 üí∞", color: "#f8e71c"},
    {text: "500 üí∞", color: "#7ed321"},
    {text: "1000 üí∞", color: "#50e3c2"},
    {text: "2x —à–∞–Ω—Å", color: "#4a90e2"},
    {text: "–ë–æ–Ω—É—Å", color: "#bd10e0"},
    {text: "–ü—Ä–∏–∑ —Å—é—Ä–ø—Ä–∏–∑", color: "#d0021b"},
  ];

  const wheelRadius = 180;
  const centerX = canvas.width / 2;
  const centerY = canvas.height / 2;
  const segmentAngle = (2 * Math.PI) / prizes.length;

  // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–æ–ª–µ—Å–∞
  function drawWheel() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    for(let i = 0; i < prizes.length; i++) {
      // —Å–µ–∫—Ç–æ—Ä
      ctx.beginPath();
      ctx.moveTo(centerX, centerY);
      ctx.arc(centerX, centerY, wheelRadius, i * segmentAngle, (i+1) * segmentAngle);
      ctx.fillStyle = prizes[i].color;
      ctx.fill();
      ctx.strokeStyle = '#fff';
      ctx.lineWidth = 2;
      ctx.stroke();

      // —Ç–µ–∫—Å—Ç –≤ —Å–µ–∫—Ç–æ—Ä–µ
      ctx.save();
      ctx.translate(centerX, centerY);
      ctx.rotate(i * segmentAngle + segmentAngle / 2);
      ctx.textAlign = "right";
      ctx.fillStyle = "#fff";
      ctx.font = "bold 16px Arial";
      ctx.fillText(prizes[i].text, wheelRadius - 20, 8);
      ctx.restore();
    }
  }

  drawWheel();

  let currentAngle = 0;
  let isSpinning = false;

  spinBtn.addEventListener('click', () => {
    if (isSpinning) return;

    isSpinning = true;
    spinBtn.disabled = true;
    resultDiv.textContent = '';

    // –ö–æ–ª-–≤–æ –≤—Ä–∞—â–µ–Ω–∏–π + —Å–ª—É—á–∞–π–Ω—ã–π —É–≥–æ–ª –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
    const spins = Math.floor(Math.random() * 3) + 4; // 4-6 –ø–æ–ª–Ω—ã—Ö –æ–±–æ—Ä–æ—Ç–æ–≤
    const stopAngle = Math.random() * 2 * Math.PI;

    // –¶–µ–ª–µ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è
    const targetAngle = spins * 2 * Math.PI + stopAngle;

    // –ê–Ω–∏–º–∞—Ü–∏—è –≤—Ä–∞—â–µ–Ω–∏—è —Å easing
    const duration = 6000; // 6 —Å–µ–∫—É–Ω–¥
    const start = performance.now();

    function animate(time) {
      let elapsed = time - start;
      if (elapsed > duration) elapsed = duration;

      // ease out cubic (–∑–∞–º–µ–¥–ª–µ–Ω–∏–µ)
      const t = elapsed / duration;
      const easedT = 1 - Math.pow(1 - t, 3);
      currentAngle = easedT * targetAngle;

      // –≤—Ä–∞—â–∞–µ–º –∫–æ–ª–µ—Å–æ (–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ, —á—Ç–æ–±—ã –≤—Ä–∞—â–∞–ª–æ—Å—å –ø–æ —á–∞—Å–æ–≤–æ–π)
      canvas.style.transform = `rotate(${-currentAngle}rad)`;

      if (elapsed < duration) {
        requestAnimationFrame(animate);
      } else {
        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≤—ã–∏–≥—Ä—ã—à–Ω—ã–π —Å–µ–∫—Ç–æ—Ä
        const normalizedAngle = currentAngle % (2 * Math.PI);
        const index = prizes.length - 1 - Math.floor(normalizedAngle / segmentAngle);
        showResult(index);
        isSpinning = false;
        spinBtn.disabled = false;
      }
    }

    requestAnimationFrame(animate);
  });

  function showResult(index) {
    resultDiv.textContent = `–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏: ${prizes[index].text}`;
  }
</script>

</body>
</html>